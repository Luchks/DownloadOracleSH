#!/bin/bash

# === CONFIGURA TU USUARIO Y CLAVE ORACLE AQU√ç ===
ORACLE_USER="tienda"
ORACLE_PASS="tiendapass"
ORACLE_HOST="localhost"
ORACLE_PORT="1521"
ORACLE_PDB="XEPDB1"  # puede ser tambi√©n "FREEPDB1"

# === RUTA LIBRER√çAS INSTANT CLIENT ===
INSTANT_CLIENT_LIB="/usr/lib/oracle/21/client64/lib"

# === Verificar que usql est√° instalado ===
if ! command -v usql &> /dev/null; then
  echo "‚ùå usql no est√° instalado. Ejecuta: yay -S usql-bin"
  exit 1
fi

# === Verificar que Instant Client est√° instalado ===
if [ ! -d "$INSTANT_CLIENT_LIB" ]; then
  echo "‚ùå Oracle Instant Client no encontrado en: $INSTANT_CLIENT_LIB"
  echo "üí° Inst√°lalo con: yay -S oracle-instantclient-basic oracle-instantclient-sdk"
  exit 1
fi

# === Exportar LD_LIBRARY_PATH para Oracle ===
export LD_LIBRARY_PATH="$INSTANT_CLIENT_LIB:$LD_LIBRARY_PATH"

# === Ejecutar usql con conexi√≥n a Oracle ===
echo "üöÄ Conectando a Oracle como $ORACLE_USER@$ORACLE_PDB ..."
usql oracle://$ORACLE_USER:$ORACLE_PASS@$ORACLE_HOST:$ORACLE_PORT/$ORACLE_PDB
